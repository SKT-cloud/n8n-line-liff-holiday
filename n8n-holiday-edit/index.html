<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç / ‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î ‚Ä¢ StudyBot</title>

  <!-- ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LIFF ID + Worker API Base + n8n -->
  <script>
    // LIFF ID ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î"
    window.__LIFF_ID__ = "2009146879-3eBGpF5j";

    // ‚úÖ Worker URL (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å: ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Worker ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Pages)
    window.__API_BASE__ = "https://study-holiday-api.suwijuck-kat.workers.dev";

    // ‚úÖ n8n webhook (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏™‡πà‡∏á‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ n8n validate ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô DB)
    // ‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÄ‡∏ä‡πà‡∏ô https://n8n.example.com/webhook/holiday-edit
    window.__N8N_WEBHOOK__ = "https://study-holiday-api.suwijuck-kat.workers.dev/webhook-test/holiday-edit";

    // (optional) ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ n8n ‡πÄ‡∏ä‡πá‡∏Ñ key
    window.__N8N_API_KEY__ = "";
  </script>

  <link rel="stylesheet" href="./style.css" />

  <!-- ‚úÖ Flatpickr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <!-- ‚úÖ LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <!-- ‚úÖ Flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <script defer src="./script.js"></script>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <header class="topbar">
    <div>
      <h1 class="title">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç / ‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</h1>
      <div class="subtitle">‡πÅ‡∏ï‡∏∞ ‚úèÔ∏è ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏£‡πà‡∏≤‡∏á) ‚Ä¢ ‡∏Å‡∏î ‚Äú‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏£‡∏¥‡∏á</div>
    </div>
    <div class="pill" id="userPill">...</div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="rowHead">
        <div>
          <div class="label">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</div>
          <div class="help" id="listHint">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
        </div>

        <div class="toolbar">
          <button class="btnGhost" id="reloadBtn" type="button">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</button>
          <button class="btnGhost" id="editAllBtn" type="button">‡∏ó‡∏¥‡πâ‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
          <button class="btnPrimary" id="saveAllBtn" type="button">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        </div>
      </div>

      <div id="list" class="list"></div>
      <div class="status" id="status"></div>
    </section>

    <div class="footer">StudyBot ‚Ä¢ LIFF</div>
  </main>

  <!-- =========================
       Modal (Edit)
  ========================= -->
  <div class="modal" id="modal" hidden>
    <div class="modalBackdrop" id="mBackdrop"></div>

    <div class="modalSheet" role="dialog" aria-modal="true" aria-labelledby="mTitle">
      <div class="modalTop">
        <div>
          <div class="modalTitle" id="mTitle">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
          <div class="modalSub" id="mSub">#- ‚Ä¢ -</div>
        </div>
        <button class="iconBtn" id="mCloseX" type="button">‚úï</button>
      </div>

      <div class="modalBody">
        <div class="row">
          <div class="label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</div>
          <select id="mType" class="input">
            <option value="cancel">üö´ ‡∏¢‡∏Å‡∏Ñ‡∏•‡∏≤‡∏™</option>
            <option value="holiday">üèùÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô</option>
          </select>
        </div>

        <div class="row">
          <div class="label">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ)</div>
          <input id="mTitleInput" class="input" placeholder="‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠..." />
        </div>

        <div class="row">
          <div class="label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (optional)</div>
          <textarea id="mNote" class="input" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."></textarea>
        </div>

        <!-- ‚úÖ CANCEL: subject + calendar -->
        <div id="cancelBox" hidden>
          <div class="row">
            <div class="label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤</div>
            <select id="mSubject" class="input"></select>
            <div class="help" id="mSubjectHint"></div>
          </div>

          <div class="row">
            <div class="label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏Å‡∏Ñ‡∏•‡∏≤‡∏™</div>
            <div class="help">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ</div>

            <div class="calWrap" id="calWrap">
              <div class="calTop">
                <div class="calTitle" id="calTitle">-</div>
                <div class="toolbar">
                  <button class="btnGhost calBtn" id="calPrev" type="button">‚Äπ</button>
                  <button class="btnGhost calBtn" id="calNext" type="button">‚Ä∫</button>
                </div>
              </div>

              <div class="calGrid" id="calGrid"></div>
            </div>

            <div class="help" id="mCancelHint"></div>
          </div>
        </div>

        <!-- ‚úÖ HOLIDAY: start/end -->
        <div id="holidayBox" hidden>
          <div class="row">
            <div class="label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
            <input id="mStart" class="input" placeholder="YYYY-MM-DD" />
          </div>
          <div class="row">
            <div class="label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (‡πÄ‡∏ß‡πâ‡∏ô‡πÑ‡∏î‡πâ = ‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)</div>
            <input id="mEnd" class="input" placeholder="YYYY-MM-DD" />
          </div>
        </div>

        <!-- ‚úÖ Reminders -->
        <div class="row">
          <div class="rowHead">
            <div>
              <div class="label">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
              <div class="help">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏±‡∏ô ‚Ä¢ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà = ‡πÑ‡∏°‡πà‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
            </div>
            <button class="btnGhost" id="mAddRem" type="button">Ôºã ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤</button>
          </div>

          <div id="mRemList"></div>
        </div>

        <!-- ‚úÖ Danger -->
        <div class="row">
          <div class="dangerZone">
            <div>
              <div class="label">‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</div>
              <div class="help">‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞ ‚Äú‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏≠‡∏•‡∏ö‚Äù ‡∏Å‡πà‡∏≠‡∏ô (‡∏•‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏ï‡∏≠‡∏ô‡∏Å‡∏î ‚Äú‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‚Äù)</div>
            </div>
            <button class="btnDanger" id="mDelete" type="button">‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏•‡∏ö</button>
          </div>
        </div>
      </div>

      <div class="modalFoot">
        <button class="btnGhost" id="mCancelBtn" type="button">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</button>
        <button class="btnGhost" id="mCloseBtn" type="button">‡∏õ‡∏¥‡∏î</button>
        <button class="btnPrimary" id="mSaveBtn" type="button">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</button>
      </div>
    </div>
  </div>

  <!-- ‚úÖ Overlay (Loading / Success / Error) -->
  <div class="overlay" id="overlay" hidden>
    <div class="overlayCard">
      <div class="overlayIcon loading" id="overlayIcon"></div>
      <div class="overlayTitle" id="overlayTitle">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‚Ä¶</div>
      <div class="overlayDesc" id="overlayDesc">‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡∏ô‡πâ‡∏≤ ‚ú®</div>
    </div>
  </div>

  <div class="toast" id="toast" hidden></div>
</body>
</html>
